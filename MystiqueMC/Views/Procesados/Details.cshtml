@model IEnumerable<MystiqueMC.DAL.Equivalencias>
@{
    ViewBag.Title = "Detalles";

}
<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-md-6">
        <h2>Equivalencia Insumo @ViewBag.nombre</h2>
    </div>
    <div class="col-md-6 text-right m-t-xs">
        <a class="btn btn-link m-sm" data-id="@ViewBag.insumo" data-nombre="@ViewBag.nombre" data-categoria="@ViewBag.categoria" data-nombresearch="@ViewBag.nombreSearch" href="#modal-agregar-equivalencia" data-toggle="modal" style="margin-top:18px"><i class="fas fa-plus-square m-r-xs " style="color:#616161; font-size:12pt"></i><b>Agregar Nuevo</b></a>
    </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-content">
                    @*<div class="sk-spinner sk-spinner-rotating-plane"></div>*@
                    <table id="ContentTable" class="table table-striped tabla-catalogos">
                        <thead>
                            <tr>
                                <th>Cantidad</th>
                                <th>Unidad de medida</th>
                                <th class="text-right " data-orderable="false"></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>@Html.DisplayFor(modelItem => item.cantidad)</td>
                                    <td>@Html.DisplayFor(modelItem => item.UnidadMedida.descripcion)</td>
                                    <td class="text-right">
                                        <a href="#modal-editar-equivalencia" class="btn-link" data-toggle="modal" data-id="@item.idEquivalencia" data-idinsumo="@item.insumoId" data-unidad="@item.unidadMedidaId"
                                           data-cantidad="@item.cantidad" data-nombre="@ViewBag.nombre" data-categoria="@ViewBag.categoria" data-nombresearch="@ViewBag.nombreSearch">
                                            <img src="~/Content/img/editar.png" style="height:19px" />
                                        </a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="form-group" style="margin-left:-16px">
        <div class="col-md-offset col-md-10">
            @Html.ActionLink("Regresar", "Index", "Insumos", new { CategoriaInsumo = ViewBag.categoria, Nombre = ViewBag.nombreSearch }, new { @class = "btn btn-white" })
        </div>
    </div>
</div>
@Html.Partial("Modales/Equivalencia/ModalAgregarEquivalencia")
@Html.Partial("Modales/Equivalencia/ModalEditarEquivalencia")

@section Scripts{
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.min.js "></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.3.1/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.html5.min.js"></script>
    @Scripts.Render("~/plugins/dataTables")

    <script>
        $(document).ready(function () {

            $('#ContentTable').dataTable({
                "dom": 'T<"clear">lfrtip',
                "tableTools": {
                    "sSwfPath": "../scripts/plugins/dataTables/swf/copy_csv_xls_pdf.swf"
                },
                "language": {
                    "search": "Buscar ",
                    "lengthMenu": "Elementos por página:  _MENU_",
                    "info": "Mostrando _START_ - _END_ de _TOTAL_ elementos",
                    "emptyTable": "No hay información",
                    "paginate": {
                        "first": "Primera",
                        "last": "Ultima",
                        "next": "Siguiente",
                        "previous": "Anterior"
                    }
                }
            });

            $("#modal-agregar-equivalencia").on("show.bs.modal",
                function (event) {
                    var $button = $(event.relatedTarget);
                    var id = $button.data("id");
                    var nombre = $button.data("nombre");
                    var categoria = $button.data("categoria");
                    var nombreSearch = $button.data("nombresearch");

                    $("#modal-agregar-equivalencia #idInsumo").val(id);
                    $("#modal-agregar-equivalencia #nombre").val(nombre);
                    $("#modal-agregar-equivalencia #categoria").val(categoria);
                    $("#modal-agregar-equivalencia #nombreSearch").val(nombreSearch);
                });

            $("#modal-editar-equivalencia").on("show.bs.modal",
                function (event) {
                    var $button = $(event.relatedTarget);
                    var id = $button.data("id");
                    var insumo = $button.data("idinsumo");
                    var unidad = $button.data("unidad");
                    var cantidad = $button.data("cantidad");
                    var nombre = $button.data("nombre");
                    var categoria = $button.data("categoria");
                    var nombreSearch = $button.data("nombresearch");

                    $("#modal-editar-equivalencia #idInsumo").val(insumo);
                    $("#modal-editar-equivalencia #idEquivalencia").val(id);
                    $("#modal-editar-equivalencia #unidadMedidaId").val(unidad);
                    $("#modal-editar-equivalencia #cantidad").val(cantidad);
                    $("#modal-editar-equivalencia #nombre").val(nombre);
                    $("#modal-editar-equivalencia #categoria").val(categoria);
                    $("#modal-editar-equivalencia #nombreSearch").val(nombreSearch);
                });

        });

    </script>
}

@section Styles {
    @Styles.Render("~/Content/plugins/dataTables/dataTablesStyles")
}