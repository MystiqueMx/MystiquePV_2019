@model IEnumerable<MystiqueMC.DAL.SucursalProductos>
@{
    /**/
    ViewBag.Title = "Index";
}

<div class="row wrapper border-bottom white-bg page-heading" style="padding:0 10px 7px 10px">
    <div class="col-sm-6">
        <h2>Menu - Sucursal @ViewBag.NombreSucursal</h2>
    </div>
    <div class="col-sm-6 text-right" style="width:49%;margin-top:14px;margin-bottom:10px">
        <a href="@Url.Action("Generar", new { IdS = ViewBag.sucursal, IdC= ViewBag.comercio })" class="btn btn-primary"><i class="fas fa-redo"></i>&nbsp;Actualizar Productos</a>
    </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-content">
                    @*<div class="sk-spinner sk-spinner-rotating-plane"></div>*@
                    <table id="ContentTable" class="table table-striped tabla-catalogos">
                        <input id="guardarPrecio" value="@Url.Action("GuardarNuevoPrecio", "Sucursales", null)" type="hidden" />
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Nombre</th>
                                <th>Precio</th>
                                <th class="text-right " data-orderable="false"></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.OrderBy(c => c.Productos.nombre))
                            {
                                <tr>
                                    <td class="col-sm-3">@item.fechaRegistro.ToShortDateString()</td>
                                    <td class="col-sm-3">@Html.DisplayFor(modelItem => item.Productos.nombre)</td>
                                    <td class="control-orden">
                                        <input hidden name="id" value="@item.idSucursalProducto" />
                                        <input class="form-control" rows="1" name="precio" style="width:22%" value="@item.precio" />
                                        <img class="botton-ac" src="~/Content/Icons/Actualizar.png" height="20" />
                                    </td>
                                    <td>
                                        @if (item.activo == true)
                                        {
                                            <button class="btn-link btn-sm m-r-n-xs" style="vertical-align:central" data-toggle="modal" data-target="#modal-estatus-inactivo" data-id="@item.idSucursalProducto" data-nombre="@item.Productos.nombre" data-sucursal="@item.sucursalId" data-comercio="@ViewBag.comercio">
                                                <img class="m-t-n-md" src="~/Content/img/on.png" style="height:24px" />
                                            </button>
                                        }
                                        else
                                        {
                                            <button class="btn-link btn-sm m-r-n-xs" data-toggle="modal" data-target="#modal-estatus-activo" data-id="@item.idSucursalProducto" data-nombre="@item.Productos.nombre" data-sucursal="@item.sucursalId" data-comercio="@ViewBag.comercio">
                                                <img class="m-t-n-md" src="~/Content/img/off.png" style="height:24px" />
                                            </button>
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <div class="form-group">
                    <div class="col-md-10" style="padding:0pt">
                        @Html.ActionLink("Regresar", "Index", "sucursales", null, new { @class = "btn btn-white" })
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@Html.Partial("Modales/ModalActivo")
@Html.Partial("Modales/ModalInactivo")
@section Scripts{
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.min.js "></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.3.1/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.html5.min.js"></script>
    @Scripts.Render("~/plugins/dataTables")
    <script src="~/Scripts/App/Sucursales/Menu.js"></script>
}

@section Styles {
    @Styles.Render("~/Content/plugins/dataTables/dataTablesStyles")
}

