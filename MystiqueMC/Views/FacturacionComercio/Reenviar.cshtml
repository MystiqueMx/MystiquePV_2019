@using System.Configuration
@{
    ViewBag.Title = "Reenvio de facturas";
}

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-sm-12">
        <h2>Reenvío de facturas</h2>
    </div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-md-12">
            <form action="#" method="post" id="form-filtros" class="form-inline m-b-lg" data-parsley-validate>
                <div class="form-group">
                    <label class="control-label m-r-sm" style="margin-right:0px">R.F.C.</label>
                    <input type="text" name="receptor" id="receptor" class="form-control m-r-lg" data-inputmask-regex="[a-zA-ZñÑ0-9\x26]{0,14}"
                           data-parsley-pattern="^([A-Za-zÑñ\x26]{3,4}([0-9]{2})(0[1-9]|1[0-2])(0[1-9]|1[0-9]|2[0-9]|3[0-1])([A-Z]|[0-9]){2}([A]|[0-9]){1})?$"
                           data-parsley-pattern-message="El formato del R.F.C. no es válido" data-inputmask-greedy="false"
                           data-parsley-errors-container="#error-receptor" style="width: 158px;margin-right:6px">
                    <span class="text-danger" id="error-receptor"></span>

                </div>

                <div class="form-group">
                    <label class="control-label m-r-sm" style="margin-right:0px">Razón Social</label>
                    <input type="text" name="nombre" id="nombre" class="form-control m-r-lg" data-inputmask-regex="[a-zA-Z 0-9ñÑ\x26]{0,200}"
                           data-inputmask-greedy="false" data-parsley-errors-container="#error-nombre" style="width: 350pt;margin-right:6px">
                    <span class="text-danger" id="error-nombre"></span>

                </div>

                <div class="form-group">
                    <label class="control-label m-r-sm" style="margin-right:0px">Emisor</label>
                    <select id="emisor" name="emisor" class="form-control input-sm" data-live-search="true" data-size="6"
                            data-noneSelectedText="Seleccione..." data-parsley-required data-parsley-errors-container="#error-Opciones"
                            style="width: 158px;margin-right:6px">
                        @foreach (var item in (SelectListItem[])ViewBag.DatosFiscales)
                        {
                            <option value="@item.Value" @(item.Selected ? "selected" : "")>@item.Text</option>
                        }
                    </select>
                    <span class="text-danger" id="error-emisor"></span>
                </div>

                @*<div class="input-group input-daterange">
                        <span class="input-group-addon" style="color: #6C6A67; background-color:transparent; border-color:transparent;margin-right:0px"><b style="margin-right:-9px">Fecha:</b></span>
                        <input autocomplete="off" type="text" class="form-control input-sm" id="fechaInicio" name="fechaInicio" value="@ViewBag.fechaInicio">
                        <span class="input-group-addon">
                            <i class="fas fa-calendar"></i>
                        </span>
                        <span class="input-group-addon" style="color:#6C6A67; background-color:transparent; border-color:transparent;margin-right:0px"><b>A</b></span>
                        <input autocomplete="off" type="text" class="form-control input-sm" id="fechaFin" name="fechaFin" value="@ViewBag.fechaFin">
                        <span class="input-group-addon">
                            <i class="fas fa-calendar"></i>
                        </span>
                    </div>*@


                <button class="btn btn-primary" type="button" id="button-search"><i class="fa fa-search"></i></button>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="ibox float-e-margins" id="main-ibox">
                <div class="ibox-content">
                    <div class="sk-spinner sk-spinner-rotating-plane"></div>
                    <table class="table table-striped tabla-catalogos display responsive no-wrap" id="tabla-facturas" width="100%">
                        <thead>
                            <tr>

                                <th>
                                    Fecha de compra
                                </th>

                                <th>
                                    Receptor
                                </th>

                                <th class="text-right">
                                    Total de la factura
                                </th>

                                <th class="text-right " data-orderable="false"></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                        <tfoot>
                            <tr id="row-no-items">
                                <th colspan="4" class="text-warning text-center">
                                    Ninguna factura
                                </th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="@Url.Content("~/Scripts/plugins/parsley/parsley.min.js")"></script>
<script src="@Url.Content("~/Scripts/plugins/parsley/parsley.es.js")"></script>
@section Scripts{
    <script>
        window.UrlFacturacion = "@ConfigurationManager.AppSettings["URL_API_FACTURACION"]";
        window.HeaderFacturación = "@ConfigurationManager.AppSettings["HEADER_API_FACTURACION"]";
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js" integrity="sha256-4iQZ6BVL4qNKlQ27TExEhBN1HFPvAvAMbFavKKosSWQ=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/locale/es.js" integrity="sha256-bETP3ndSBCorObibq37vsT+l/vwScuAc9LRJIQyb068=" crossorigin="anonymous"></script>
    <script src="~/Scripts/plugins/parsley/validators/comparison.js"></script>
    <script src="~/Scripts/app/FacturacionComercio/Reenviar.js"></script>
    <script>
        function OnScriptsLoad() {
            SetUpDataTableCatalogos();
        }
    </script>
    <script>
        jQuery(document).ready(function ($) {
            $('#fechaInicio').datepicker({
                language: 'es',
                Format: "mm/dd/yyyy",
                changeMonth: true,
                changeYear: true,
                yearRange: "-60:+0"
            });
        });
        jQuery(document).ready(function ($) {
            $('#fechaFin').datepicker({
                language: 'es',
                Format: "mm/dd/yyyy",
                changeMonth: true,
                changeYear: true,
                yearRange: "-60:+0"
            });
        });
    </script>

    <script>
        $('#fechaInicio').on("change", function () {
            var startVal = $('#fechaInicio').val();
            $('#fechaFin').data('datepicker').setStartDate(startVal);
        });
        $('#fechaFin').on("change", function () {
            var endVal = $('#fechaFin').val();
            $('#fechaInicio').data('datepicker').setEndDate(endVal);
        });
    </script>
}
